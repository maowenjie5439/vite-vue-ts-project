{"version":3,"file":"vite.config.js","sourceRoot":"","sources":["vite.config.ts"],"names":[],"mappings":"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","sourcesContent":["import { defineConfig, loadEnv } from \"vite\";\r\nimport type { UserConfig, ConfigEnv } from \"vite\";\r\n// import { visualizer } from \"rollup-plugin-visualizer\";\r\nimport { fileURLToPath } from \"url\";\r\nimport vue from \"@vitejs/plugin-vue\";\r\nimport vueJsx from \"@vitejs/plugin-vue-jsx\";\r\nimport { viteMockServe } from \"vite-plugin-mock\";\r\nimport AutoImport from \"unplugin-auto-import/vite\";\r\nimport Components from \"unplugin-vue-components/vite\";\r\nimport { ElementPlusResolver } from \"unplugin-vue-components/resolvers\";\r\nimport IconsResolver from \"unplugin-icons/resolver\";\r\nimport ElementPlus from \"unplugin-element-plus/vite\";\r\nimport Icons from \"unplugin-icons/vite\";\r\nimport ViteCompression from \"vite-plugin-compression\";\r\nimport { preloadImgs } from \"./config/plugins/preloadImgs\";\r\n\r\nexport default defineConfig(\r\n    ({ mode }: ConfigEnv): UserConfig & { test: { include: string[] } } => {\r\n        debugger;\r\n        // è·å–å½“å‰å·¥ä½œç›®å½•\r\n        const root = process.cwd();\r\n        // è·å–ç¯å¢ƒå˜é‡\r\n        const env = loadEnv(mode, root);\r\n        console.log(\"ğŸš€ ~ defineConfig ~ env:\", env);\r\n        return {\r\n            // é¡¹ç›®æ ¹ç›®å½•\r\n            root,\r\n            // é¡¹ç›®éƒ¨ç½²çš„åŸºç¡€è·¯å¾„\r\n            base: \"./\",\r\n            publicDir: fileURLToPath(new URL(\"./public\", import.meta.url)), // æ— éœ€å¤„ç†çš„é™æ€èµ„æºä½ç½®\r\n            assetsInclude: fileURLToPath(\r\n                new URL(\"./src/assets\", import.meta.url)\r\n            ), // éœ€è¦å¤„ç†çš„é™æ€èµ„æºä½ç½®\r\n            plugins: [\r\n                ViteCompression({\r\n                    // verbose: true,\r\n                    // disable: false,\r\n                    threshold: 1024 * 20, // å‹ç¼©é˜ˆå€¼\r\n                    algorithm: \"gzip\", // å‹ç¼©ç®—æ³•\r\n                    ext: \".gz\", // å‹ç¼©åç¼€\r\n                }),\r\n                // Vueæ¨¡æ¿æ–‡ä»¶ç¼–è¯‘æ’ä»¶\r\n                vue(),\r\n                // jsxæ–‡ä»¶ç¼–è¯‘æ’ä»¶\r\n                vueJsx(),\r\n                // mockæ’ä»¶\r\n                viteMockServe({\r\n                    // æ‹¦æˆªæ¥å£çš„ç›®å½•\r\n                    mockPath: \"mock\",\r\n                    // æ˜¯å¦å¯ç”¨mock\r\n                    enable: env.VITE_APP_USE_MOCK === \"true\",\r\n                }),\r\n                // å¼€å¯ElementPlusè‡ªåŠ¨å¼•å…¥CSS\r\n                ElementPlus({}),\r\n                // æŒ‰éœ€å¼•å…¥æ’ä»¶ï¼Œè‡ªåŠ¨å¼•å…¥ElementPlusï¼Œå¤„ç† API çº§åˆ«çš„è‡ªåŠ¨å¯¼å…¥\r\n                AutoImport({\r\n                    resolvers: [ElementPlusResolver(), IconsResolver()],\r\n                    // ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶\r\n                    dts: \"types/auto-imports.d.ts\",\r\n                    // è‡ªåŠ¨å¯¼å…¥ Vue ç›¸å…³å‡½æ•°ï¼Œå¦‚ï¼šref, reactive, toRef ç­‰\r\n                    imports: [\"vue\", \"vue-router\"],\r\n                }),\r\n                // æŒ‰éœ€å¼•å…¥æ’ä»¶ï¼Œå¤„ç†ç»„ä»¶çº§åˆ«çš„è‡ªåŠ¨å¯¼å…¥\r\n                Components({\r\n                    resolvers: [ElementPlusResolver(), IconsResolver()],\r\n                    // ç”Ÿæˆç±»å‹å£°æ˜æ–‡ä»¶\r\n                    dts: \"types/components.d.ts\",\r\n                }),\r\n                Icons({\r\n                    autoInstall: true,\r\n                }),\r\n                preloadImgs({\r\n                    dir: 'src/assets/imgs/*.{jpg,png, svg}',\r\n                    attrs: {\r\n                        rel: 'preload',\r\n                    }\r\n                }),\r\n            ],\r\n            // è¿è¡Œåæœ¬åœ°é¢„è§ˆçš„æœåŠ¡å™¨\r\n            server: {\r\n                // æ˜¯å¦å¼€å¯https\r\n                // https: false,\r\n                // æŒ‡å®šæœåŠ¡å™¨åº”è¯¥ç›‘å¬å“ªä¸ª IP åœ°å€ã€‚ å¦‚æœå°†æ­¤è®¾ç½®ä¸º 0.0.0.0 æˆ–è€… true å°†ç›‘å¬æ‰€æœ‰åœ°å€ï¼ŒåŒ…æ‹¬å±€åŸŸç½‘å’Œå…¬ç½‘åœ°å€ã€‚\r\n                host: true,\r\n                // å¼€å‘ç¯å¢ƒé¢„è§ˆæœåŠ¡å™¨ç«¯å£\r\n                port: 9000,\r\n                // å¯åŠ¨åæ˜¯å¦è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨\r\n                open: false,\r\n                // æ˜¯å¦å¼€å¯CORSè·¨åŸŸ\r\n                cors: true,\r\n                // ä»£ç†æœåŠ¡å™¨\r\n                // å¸®åŠ©æˆ‘ä»¬å¼€å‘æ—¶è§£å†³è·¨åŸŸé—®é¢˜\r\n                proxy: {\r\n                    // è¿™é‡Œçš„æ„æ€æ˜¯ ä»¥/apiå¼€å¤´å‘é€çš„è¯·æ±‚éƒ½ä¼šè¢«è½¬å‘åˆ° http://xxx:9000\r\n                    [env.VITE_APP_API_BASEURL]: {\r\n                        target: \"http://localhost:9000\",\r\n                        // æ”¹å˜ Host Header\r\n                        changeOrigin: true,\r\n                        // å‘èµ·è¯·æ±‚æ—¶å°† '/api' æ›¿æ¢ä¸º ''\r\n                        //rewrite: (path) => path.replace(/^\\/api/, \"\"),\r\n                    },\r\n                    [env.VITE_APP_MOCK_BASEURL]: {\r\n                        target: \"http://localhost:9000\",\r\n                        // æ”¹å˜ Host Header\r\n                        changeOrigin: true,\r\n                        // å‘èµ·è¯·æ±‚æ—¶å°† '/api' æ›¿æ¢ä¸º ''\r\n                        //rewrite: (path) => path.replace(/^\\/api/, \"\"),\r\n                    },\r\n                },\r\n            },\r\n            // æ‰“åŒ…é…ç½®\r\n            build: {\r\n                // å…³é—­ sorcemap æŠ¥é”™ä¸ä¼šæ˜ å°„åˆ°æºç \r\n                sourcemap: true,\r\n                // æ‰“åŒ…å¤§å°è¶…å‡º 400kb æç¤ºè­¦å‘Š\r\n                chunkSizeWarningLimit: 400,\r\n                rollupOptions: {\r\n                    // æ‰“åŒ…å…¥å£æ–‡ä»¶ æ ¹ç›®å½•ä¸‹çš„ index.html\r\n                    // ä¹Ÿå°±æ˜¯é¡¹ç›®ä»å“ªä¸ªæ–‡ä»¶å¼€å§‹æ‰“åŒ…\r\n                    input: {\r\n                        index: fileURLToPath(\r\n                            new URL(\"./index.html\", import.meta.url)\r\n                        ),\r\n                    },\r\n                    // plugins: [visualizer({ open: true })],\r\n                    // output: {\r\n                    //     format: \"esm\",\r\n                    //     // 1. ä»£ç åˆ†å‰²çš„chunkæ–‡ä»¶å‘½å\r\n                    //     chunkFileNames: \"static/js/[name]-[hash].js\",\r\n                    //     // 2. å…¥å£æ–‡ä»¶çš„chunkæ–‡ä»¶å‘½å\r\n                    //     entryFileNames: \"static/js/[name]-[hash].js\",\r\n                    //     // 3. é™æ€èµ„æºæ–‡ä»¶çš„å‘½å\r\n                    //     assetFileNames: \"static/[ext]/[name]-[hash].[ext]\",\r\n                    //     // [name]: æ–‡ä»¶å\r\n                    //     // [hash]: å†…å®¹å“ˆå¸Œå€¼ï¼Œç”¨äºç¼“å­˜æ§åˆ¶\r\n                    //     // [ext]: æ–‡ä»¶æ‰©å±•å\r\n                    // },\r\n                    // output: {\r\n                    //     manualChunks: (id: string) => {\r\n                    //         if (id.includes('node_modules')) {\r\n                    //             return 'vendor';\r\n                    //         }else{\r\n                    //             return 'index'\r\n                    //         }\r\n                    //     },\r\n                    // }\r\n\r\n                    output: {\r\n                        // æœ€å°chunkæ–‡ä»¶å¤§å°24kb\r\n                        experimentalMinChunkSize: 20 * 1024,\r\n                        manualChunks: (id: string) => {\r\n                            if (id.includes(\"node_modules\")) {\r\n                                return \"vendor\";\r\n                            }\r\n                        },\r\n                        // 1. ä»£ç åˆ†å‰²çš„chunkæ–‡ä»¶å‘½å\r\n                        chunkFileNames: \"static/js/chunk-[hash].js\",\r\n                        // 2. å…¥å£æ–‡ä»¶çš„chunkæ–‡ä»¶å‘½å\r\n                        entryFileNames: \"static/js/entry-[hash].js\",\r\n                        // 3. é™æ€èµ„æºæ–‡ä»¶çš„å‘½å\r\n                        assetFileNames: \"static/[ext]/[name]-[hash].[ext]\",\r\n                    },\r\n                },\r\n            },\r\n            // é…ç½®åˆ«å\r\n            resolve: {\r\n                alias: {\r\n                    \"@\": fileURLToPath(new URL(\"./src\", import.meta.url)),\r\n                    \"#\": fileURLToPath(new URL(\"./types\", import.meta.url)),\r\n                },\r\n            },\r\n            css: {\r\n                preprocessorOptions: {\r\n                    scss: {\r\n                        // additionalData: `@import \"@/styles/index.scss\";`,\r\n                    },\r\n                },\r\n            },\r\n            test: {\r\n                include: [\"test/**/*.test.ts\"],\r\n            },\r\n        };\r\n    }\r\n);\r\n"]}